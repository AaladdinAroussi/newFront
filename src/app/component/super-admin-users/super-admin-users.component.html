<div class="page-wrapper dashboard ">
  
    <!-- Preloader -->
    <!-- <div class="preloader"></div> -->

    <!-- Header Span -->
    <span class="header-span"></span>

    <!-- Main Header-->
    <app-header></app-header>
    <!--End Main Header -->

    <!-- Sidebar Backdrop -->
    <div class="sidebar-backdrop"></div>

    <!-- User Sidebar -->
    <app-side-bar-super-admin></app-side-bar-super-admin>
    <!-- End User Sidebar -->

    <!-- Dashboard -->
    <section class="user-dashboard">
      <div class="dashboard-outer">
        <div class="upper-title-box">
          <h3>Users</h3>
          <div class="text">Ready to jump back in?</div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <!-- Ls widget -->
            <div class="ls-widget">
              <div class="tabs-box">
                <div class="widget-title">
                  <h4>Users</h4>

                </div>

                <div class="widget-content">
                  <div class="table-outer">
                    <table class="default-table manage-job-table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>Username</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Total Jobs created/applied</th>
                          <th>Status</th>
                            <th>Actions</th>

                        </tr>
                      </thead>

                      <tbody>
                        <tr *ngIf="users.length === 0">
                          <td colspan="7" style="text-align: center;">No users available.</td>
                      </tr>
                        <tr *ngFor="let user of users; let i = index">

                          <td>{{ i + 1 }}</td>
              
                          <td class="trans-id">{{ user.username }}</td>
              
                          <td class="package"><a href="#">{{ user.email }}</a></td>
              
                          <td >{{ user.role }}</td>
              
                          <td class="total-jobs">{{ user.totalJobs || 0 }}</td> <!-- Assuming you have a totalJobs property -->
                          <td [ngClass]="{
                            'blocked text-danger': user.status === 'BLOCKED', 
                            'status': user.status === 'ACTIVE' || user.status == null
                        }">
                        {{ user.status ? user.status.toLowerCase() : 'active' }} <!-- Use 'active' if status is null -->
        
                    </td> <!-- Assuming you have a status property -->
              
                          <td>
              
                              <div class="option-box">
              
                                  <ul class="option-list">
              
                                      <li>
              
                                          <button (click)="viewUser (user)" data-text="View User">
              
                                              <span class="la la-eye"></span>
              
                                          </button>
              
                                      </li>
              
                                      <li>
                                        <button (click)="user.status === 'BLOCKED' ? unblockUser(user.id) : blockUser(user.id)"
                                                [attr.data-text]="user.status === 'BLOCKED' ? 'Unblock User' : 'Block User'"
                                                class="hover-text">
                                            <span class="la" [ngClass]="user.status === 'BLOCKED' ? 'la-check' : 'la-ban'"></span>
                                        </button>
                                    </li>
                                    
              
                                    <li>
                                      <button (click)="deleteUser(user.id, user.role)" data-text="Delete User">
                                          <span class="la la-trash"></span>
                                      </button>
                                  </li>
                                  </ul>
                              </div>               
                          </td>             
                      </tr>                          
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>
    </section>
    <!-- End Dashboard -->



  </div><!-- End Page Wrapper -->